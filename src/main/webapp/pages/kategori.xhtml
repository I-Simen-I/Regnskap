<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Opprett kategori</title>
</h:head>

<h:form id="#{commonAction.formId}">
    <p:growl id="messages"/>

    <f:metadata>
        <f:viewParam name="user" value="#{kategoriAction.user}"/>
        <f:viewAction action="#{kategoriAction.onload}"/>
    </f:metadata>

    <h:panelGroup id="kategoriList">
        <h1>Kategorioversikt</h1>

        <p:outputLabel value="Kategorier"/>
        <p:dataTable value="#{kategoriAction.kategoriList}" var="kategori">
            <p:column headerText="Navn">
                <h:outputText value="#{kategori.navn}"/>
            </p:column>

            <p:column headerText="Opprettet av">
                <h:outputText value="#{kategori.opprettetAv}"/>
            </p:column>

            <p:column headerText="Dato opprettet">
                <h:outputText value="#{kategori.opprettet}">
                    <f:convertDateTime type="date" pattern="dd-MM-YYYY"/>
                </h:outputText>
            </p:column>
        </p:dataTable>
    </h:panelGroup>

    <h:panelGroup id="addKategori">
        <p:outputLabel value="Opprett kategori"/>
        <p:panelGrid columns="2">
            <p:outputLabel for="kategoriNavn" value="Kategori navn:"/>
            <p:autoComplete id="kategoriNavn" value="#{kategoriAction.form.kategoriNavn}"
                            completeMethod="#{kategoriAction.completeText}"
                            maxResults="5"
                            required="true">
                <f:validateLength minimum="3" maximum="55"/>
                <f:validateRegex pattern="^[a-zA-Z ]+$"/>
            </p:autoComplete>
        </p:panelGrid>

        <p:commandButton value="Register kategori"
                         alt="Register kategori"
                         action="#{kategoriAction.save()}"
                         update="messages formId:kategoriList formId:addKategori"
                         icon="ui-icon-disk"
        />
    </h:panelGroup>
</h:form>
</html>